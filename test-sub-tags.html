<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SubTags í…ŒìŠ¤íŠ¸</title>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
  <h1>SubTags í…ŒìŠ¤íŠ¸</h1>
  <button onclick="testSubTags()">SubTags ë°ì´í„° í™•ì¸</button>
  <button onclick="addNewNoticesWithSubTags()">ìƒˆ ê³µì§€ ì¶”ê°€ (SubTags í¬í•¨)</button>
  <div id="result"></div>

  <script>
    const supabaseUrl = 'https://ofvwlzcipjjvguzjcgem.supabase.co'
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9mdndsemNpcGpqdmd1empjZ2VtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYzMzEyMzQsImV4cCI6MjA1MTkwNzIzNH0.BLb_4sN8w7JIuYvxrL_qx0t0ZcI-3YNy9Z9d4WqfQnE'
    const supabase = supabase.createClient(supabaseUrl, supabaseKey)

    async function testSubTags() {
      try {
        const { data, error } = await supabase
          .from('notices')
          .select('id, title, tags, sub_tags')
          .limit(5)

        console.log('Query result:', { data, error })
        document.getElementById('result').innerHTML = `
          <h3>ê²°ê³¼:</h3>
          <pre>${JSON.stringify(data, null, 2)}</pre>
        `
      } catch (err) {
        console.error('Error:', err)
        document.getElementById('result').innerHTML = `Error: ${err.message}`
      }
    }

    async function addTestData() {
      try {
        // ê¸°ì¡´ ë°ì´í„°ì— subTags ì¶”ê°€
        const updates = [
          {
            title: 'ğŸ“± ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš© ì£¼ì˜',
            sub_tags: ['ì‚¬ì´ë²„ì•ˆì „', 'ë””ì§€í„¸ì‹œë¯¼ì˜ì‹', 'ìŠ¤ë§ˆíŠ¸í°ì¤‘ë…ì˜ˆë°©']
          },
          {
            title: 'ğŸ‰ ì˜¤ëŠ˜ì˜ ì¹­ì°¬',
            sub_tags: ['ê¸ì •í”¼ë“œë°±', 'í•™ìŠµë™ê¸°', 'ìì¡´ê°í–¥ìƒ']
          },
          {
            title: 'ğŸ“š ë…ì„œ ìŠµê´€ ê¸°ë¥´ê¸°',
            sub_tags: ['ë…ì„œêµìœ¡', 'ì–´íœ˜ë ¥í–¥ìƒ', 'ì§‘ì¤‘ë ¥ê°•í™”']
          },
          {
            title: 'ğŸ¥— ê±´ê°•í•œ ì‹ìŠµê´€',
            sub_tags: ['ì˜ì–‘êµìœ¡', 'í¸ì‹ì˜ˆë°©', 'ì„±ì¥ê¸°ê±´ê°•']
          },
          {
            title: 'ë©€í‹°íƒ­ ì‚¬ìš© ì‹œ ì•ˆì „ì‚¬ê³  ì˜ˆë°© ì•ˆë‚´',
            sub_tags: ['ì „ê¸°ì•ˆì „', 'í™”ì¬ì˜ˆë°©', 'ì•ˆì „ìˆ˜ì¹™']
          }
        ];

        for (const update of updates) {
          const { data, error } = await supabase
            .from('notices')
            .update({ sub_tags: update.sub_tags })
            .eq('title', update.title)
            .select();

          console.log(`Updated ${update.title}:`, { data, error });
        }

        document.getElementById('result').innerHTML = `
          <h3>ê¸°ì¡´ ë°ì´í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ!</h3>
          <p>ì´ ${updates.length}ê°œ ê³µì§€ì— subTags ì¶”ê°€ë¨</p>
        `;
      } catch (err) {
        console.error('Error:', err)
        document.getElementById('result').innerHTML = `Error: ${err.message}`
      }
    }

    async function addMoreSubTags() {
      try {
        const moreUpdates = [
          {
            title: 'ğŸŒ¿ ìƒì¾Œí•œ ê¸°ì˜¨',
            sub_tags: ['ë‚ ì”¨ì •ë³´', 'ì•¼ì™¸í™œë™', 'ê±´ê°•ê´€ë¦¬']
          },
          {
            title: 'â˜€ï¸ ì¢‹ì€ ë‚ ì”¨',
            sub_tags: ['ë‚ ì”¨ì •ë³´', 'ê¸°ë¶„ì¢‹ì€í•˜ë£¨', 'ì•¼ì™¸ìˆ˜ì—…']
          },
          {
            title: 'íŠ¹ë³„ì‹¤ ìˆ˜ì—… ì „ êµì‹¤ ì •ëˆ ì•ˆë‚´',
            sub_tags: ['êµì‹¤ê´€ë¦¬', 'ìˆ˜ì—…ì¤€ë¹„', 'í™˜ê²½ì •ë¦¬']
          },
          {
            title: 'ì—¬ë¦„ì²  ë¬¼ë†€ì´ ì•ˆì „ìˆ˜ì¹™',
            sub_tags: ['ë¬¼ë†€ì´ì•ˆì „', 'ì—¬ë¦„ì² ì£¼ì˜', 'ì‘ê¸‰ì²˜ì¹˜']
          }
        ];

        for (const update of moreUpdates) {
          const { data, error } = await supabase
            .from('notices')
            .update({ sub_tags: update.sub_tags })
            .eq('title', update.title)
            .select();

          console.log(`Updated ${update.title}:`, { data, error });
        }

        document.getElementById('result').innerHTML = `
          <h3>ì¶”ê°€ ë°ì´í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ!</h3>
          <p>ì´ ${moreUpdates.length}ê°œ ê³µì§€ì— subTags ì¶”ê°€ë¨</p>
        `;
      } catch (err) {
        console.error('Error:', err)
        document.getElementById('result').innerHTML = `Error: ${err.message}`
      }
    }
  </script>
</body>
</html>
