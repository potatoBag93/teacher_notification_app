# 문구 편집 페이지 최종 개발 명세서

## 📋 **개발 우선순위 및 단계**

### 1단계 (MVP - 필수 기능)
- [x] 블록 드래그앤드롭 순서 변경
- [x] 블록 내용 텍스트 편집 (제목, 내용, 태그)
- [x] 미리보기 + 클립보드 복사
- [x] 자동 날짜 제목 생성

### 3단계 (확장 기능)
- [ ] 편집된 블록 저장 (개인용)
- [ ] 블록별 공유 기능
- [ ] 신고 시스템 구현

### 2단계 (AI 기능 - 후순위)
- [ ] AI 문체 통일 (~습니다체 등)
- [ ] 중복 내용 제거

---

## 🎨 **UI/UX 설계**

### 메인화면 선택 UI
```
┌─────────────────────────────────────┐
│ [3개 선택됨 ▼]    [편집하기] [새 알림장] │
├─────────────────────────────────────┤ ← 클릭하면 아래로 펼쳐짐
│ ✓ 물놀이 안전 문구 1                │
│ ✓ 물놀이 안전 문구 2                │  
│ ✓ 생활지도 문구 1                   │
└─────────────────────────────────────┘
```

### 편집 페이지 레이아웃 (상하 분할)
```
┌─────────────────────────────────────┐
│ 선택된 블록들 (클릭하여 편집영역에 추가) │
│ [물놀이 안전 1] [물놀이 안전 2] [생활지도] │
├─────────────────────────────────────┤
│           편집 영역                  │
│  [블록1: 드래그 가능]               │
│  [블록2: 내용 편집 가능]            │
│  [블록3: 태그 수정 가능]            │
│                                     │
│  [미리보기] [저장] [AI 포맷팅]       │
└─────────────────────────────────────┘
```

---

## 📦 **데이터 구조**

### 블록 구조
```json
{
  "id": "block_12345",
  "title": "물놀이 안전 주의사항",
  "content": "수영장에서는 안전수칙을 지켜주세요...",
  "tags": ["안전", "여름활동"],
  "created_by": "user_id",
  "created_at": "2025-08-08T10:30:00Z",
  "is_public": true,
  "report_status": "none", // none, reported, hidden, approved
  "report_count": 0,
  "original_block_id": null // 편집된 경우 원본 ID
}
```

### 신고 데이터 구조
```json
{
  "id": "report_123",
  "block_id": "block_12345", 
  "reporter_id": "user_456",
  "report_type": "inappropriate_tag", // inappropriate_content, inappropriate_tag, other
  "reason": "태그가 내용과 맞지 않음",
  "created_at": "2025-08-08T11:00:00Z",
  "status": "pending" // pending, resolved, dismissed
}
```

---

## ⚙️ **기능 상세 명세**

### 1. 메인화면 연동
- **선택 표시**: 상단 바에 "N개 선택됨 ▼" 토글
- **토글 펼침**: 선택된 블록들의 제목 목록 표시 (내용 미리보기)
- **편집 진입**: 1개 이상 선택 시 "편집하기" 버튼 활성화
- **선택 제한**: 최대 10개 블록 (성능 고려)

### 2. 편집 페이지 핵심 기능
- **블록 추가**: 상단 선택 영역에서 클릭하여 편집 영역에 추가
- **순서 변경**: 편집 영역 내 드래그앤드롭
- **내용 편집**: 제목, 내용, 태그 인라인 편집
- **블록 병합**: 같은 태그의 블록들 선택하여 병합 가능
- **실시간 카운트**: 현재 편집 중인 블록 개수 표시

### 3. 태그 시스템
- **기존 태그 선택**: 드롭다운으로 기존 태그 목록 제공
- **색상 구분**: 태그별 파스텔 색상으로 블록 구분
- **다중 태그**: 하나의 블록에 여러 태그 적용 가능
- **태그 검증**: 커뮤니티 신고 시스템으로 품질 관리

### 4. 미리보기 및 저장
- **새 탭 미리보기**: 편집 화면 유지하며 브라우저 새 탭으로 열기
- **수동 갱신**: 편집 후 미리보기 버튼으로 갱신
- **클립보드 복사**: 서식 포함하여 복사 (볼드, 들여쓰기 등)
- **자동 제목**: "2025년 8월 8일 알림장" 형태로 자동 생성

### 5. 저장 및 공유
- **독립 저장**: 편집된 블록을 완전히 새로운 블록으로 저장
- **공개 설정**: 저장 시 공개/비공개 선택 가능
- **태그별 분류**: 각 블록의 태그에 따라 메인화면에 분류 표시

---

## 🛡️ **품질 관리 시스템**

### 신고 처리 프로세스
1. **신고 접수**: 부적절한 내용/태그/기타 분류
2. **즉시 비공개**: 신고된 블록 자동 숨김 처리
3. **관리자 검토**: 관리자 페이지에서 신고 내용 검토
4. **처리 결정**: 복원/삭제/태그 수정 결정

### 데이터 품질 유지
- **다중 태그**: 애매한 내용의 경우 여러 태그 적용
- **커뮤니티 자정**: 사용자 신고를 통한 품질 관리
- **관리자 도구**: 신고 내역 일괄 처리 기능

---

## 🔧 **기술 구현 가이드**

### 필수 기능 (1단계)
1. **드래그앤드롭**: HTML5 Drag & Drop API 또는 Sortable.js
2. **인라인 편집**: contenteditable 또는 별도 에디터
3. **태그 UI**: 다중 선택 드롭다운 (Select2 등)
4. **미리보기**: window.open() 또는 새 탭 생성
5. **클립보드**: navigator.clipboard API

### 데이터베이스 설계
- **블록 테이블**: id, title, content, tags, created_by, created_at, is_public, report_status
- **신고 테이블**: id, block_id, reporter_id, report_type, reason, created_at, status
- **태그 테이블**: id, name, color, icon (선택사항)

### API 엔드포인트
```
GET  /api/blocks          - 블록 목록 조회
POST /api/blocks          - 새 블록 생성
PUT  /api/blocks/:id      - 블록 수정
POST /api/blocks/report   - 블록 신고
GET  /api/tags            - 태그 목록 조회
```

---

## 🎯 **성공 지표**

### 사용자 경험 측정
- **편집 완료율**: 편집 페이지 진입 대비 저장 완료 비율
- **편집 소요 시간**: 평균 편집 완료 시간 (목표: 3분 이내)
- **재사용률**: 편집된 블록의 다른 사용자 활용 비율

### 품질 관리 효과
- **신고 처리 시간**: 신고 접수 후 처리 완료까지 시간
- **잘못된 태그 비율**: 전체 블록 대비 부적절한 태그 비율
- **사용자 만족도**: 편집 기능에 대한 사용자 피드백

---

## 📅 **개발 일정 (예상)**

### Week 1-2: 기본 UI 구현
- 메인화면 선택 UI (토글)
- 편집 페이지 레이아웃 (상하 분할)
- 드래그앤드롭 순서 변경

### Week 3-4: 편집 기능 구현  
- 블록 내용 편집 (제목, 내용, 태그)
- 미리보기 및 클립보드 복사
- 자동 날짜 제목 생성

### Week 5-6: 저장 및 공유
- 편집된 블록 저장 기능
- 공개/비공개 설정
- 태그별 분류 표시

### Week 7-8: 품질 관리
- 신고 시스템 구현
- 관리자 검토 도구
- 성능 최적화 및 테스트

---

이제 **실제 개발 시작이 가능한 수준의 상세 명세**가 완성되었습니다! 🎉
