<template>
  <AppLayout>
    <div class="component-library">
      <header class="library-header">
        <h1>ğŸ¨ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬</h1>
        <p>êµì‹¤ ì†Œí†µ ë¬¸êµ¬ ì•±ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì˜ ì‹¤ì‹œê°„ ë°ëª¨</p>
        <div class="library-stats">
          <span class="stat-item">ğŸ“¦ {{ Object.keys(components).length }}ê°œ ì»´í¬ë„ŒíŠ¸</span>
          <span class="stat-item">ğŸ·ï¸ {{ categories.length }}ê°œ ì¹´í…Œê³ ë¦¬</span>
          <span class="stat-item">ğŸ”– {{ allSubTags.length }}ê°œ ì„œë¸Œíƒœê·¸</span>
        </div>
      </header>

      <main class="library-content">
        <!-- BaseCard ì»´í¬ë„ŒíŠ¸ -->
        <section class="component-section">
          <h2>BaseCard</h2>
          <p>ê¸°ë³¸ ì¹´ë“œ ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ - ëª¨ë“  ì¹´ë“œ UIì˜ ê¸°ë°˜</p>
          
          <div class="component-demo">
            <div class="demo-grid">
              <BaseCard padding="md" shadow="md">
                <h3>ê¸°ë³¸ ì¹´ë“œ</h3>
                <p>ê¸°ë³¸ì ì¸ ì¹´ë“œ ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤.</p>
              </BaseCard>
              
              <BaseCard padding="lg" shadow="lg" hover>
                <h3>í˜¸ë²„ íš¨ê³¼</h3>
                <p>ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ê·¸ë¦¼ìê°€ ì§„í•´ì§‘ë‹ˆë‹¤.</p>
              </BaseCard>
              
              <BaseCard padding="md" shadow="md" clickable @click="handleCardClick">
                <h3>í´ë¦­ ê°€ëŠ¥</h3>
                <p>í´ë¦­í•  ìˆ˜ ìˆëŠ” ì¹´ë“œì…ë‹ˆë‹¤.</p>
              </BaseCard>
            </div>
          </div>
        </section>

        <!-- BaseButton ì»´í¬ë„ŒíŠ¸ -->
        <section class="component-section">
          <h2>BaseButton</h2>
          <p>ë‹¤ì–‘í•œ ìŠ¤íƒ€ì¼ì˜ ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸ - ì¼ê´€ëœ ì¸í„°ë™ì…˜ ì œê³µ</p>
          
          <div class="component-demo">
            <div class="demo-buttons">
              <BaseButton variant="primary">Primary</BaseButton>
              <BaseButton variant="secondary">Secondary</BaseButton>
              <BaseButton variant="outline">Outline</BaseButton>
              <BaseButton variant="ghost">Ghost</BaseButton>
              <BaseButton variant="danger">Danger</BaseButton>
            </div>
            
            <div class="demo-buttons">
              <BaseButton variant="primary" size="sm">Small</BaseButton>
              <BaseButton variant="primary" size="md">Medium</BaseButton>
              <BaseButton variant="primary" size="lg">Large</BaseButton>
            </div>
            
            <div class="demo-buttons">
              <BaseButton variant="primary" :loading="loading" @click="toggleLoading">
                {{ loading ? 'ë¡œë”© ì¤‘...' : 'ë¡œë”© í…ŒìŠ¤íŠ¸' }}
              </BaseButton>
              <BaseButton variant="secondary" disabled>ë¹„í™œì„±í™”</BaseButton>
            </div>
          </div>
        </section>

        <!-- CategoryTag ì»´í¬ë„ŒíŠ¸ -->
        <section class="component-section">
          <h2>CategoryTag</h2>
          <p>ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒê³¼ ì˜ë¯¸ë¥¼ ê°€ì§„ íƒœê·¸ ì»´í¬ë„ŒíŠ¸ - 13ê°œ í†µí•© ì¹´í…Œê³ ë¦¬ ì‹œìŠ¤í…œ</p>
          
          <div class="component-demo">
            <h4 class="demo-subtitle">ğŸ“š êµìœ¡ ê´€ë ¨ ì¹´í…Œê³ ë¦¬</h4>
            <div class="demo-tags">
              <CategoryTag category="í•™ìŠµê´€ë¦¬" />
              <CategoryTag category="ìƒí™œì§€ë„" />
              <CategoryTag category="ì•ˆì „ë³´ê±´" />
              <CategoryTag category="ì¸ì„±êµìœ¡" />
            </div>
            
            <h4 class="demo-subtitle">ğŸ¨ í™œë™ ê´€ë ¨ ì¹´í…Œê³ ë¦¬</h4>
            <div class="demo-tags">
              <CategoryTag category="ì°½ì˜ì˜ˆìˆ " />
              <CategoryTag category="ì²´ìœ¡ê±´ê°•" />
              <CategoryTag category="í™˜ê²½ì •ë³´" />
              <CategoryTag category="í–‰ì‚¬í™œë™" />
            </div>
            
            <h4 class="demo-subtitle">ğŸ’¬ ì†Œí†µ ê´€ë ¨ ì¹´í…Œê³ ë¦¬</h4>
            <div class="demo-tags">
              <CategoryTag category="ìƒë‹´ì§€ì›" />
              <CategoryTag category="í•™êµì•Œë¦¼" />
              <CategoryTag category="íŠ¹ë³„êµìœ¡" />
              <CategoryTag category="ê°€ì •ì—°ê³„" />
              <CategoryTag category="ê¸°íƒ€ì‚¬í•­" />
            </div>
            
            <h4 class="demo-subtitle">âœ… í´ë¦­ ê°€ëŠ¥í•œ í•„í„° íƒœê·¸</h4>
            <div class="demo-tags">
              <CategoryTag 
                v-for="tag in ['í•™ìŠµê´€ë¦¬', 'ì•ˆì „ë³´ê±´', 'ì¸ì„±êµìœ¡']" 
                :key="tag"
                :category="tag as Category" 
                clickable 
                :active="activeTag === tag" 
                @click="setActiveTag" 
              />
            </div>
          </div>
        </section>

        <!-- SearchInput ì»´í¬ë„ŒíŠ¸ -->
        <section class="component-section">
          <h2>SearchInput</h2>
          <p>ìŠ¤ë§ˆíŠ¸ ìë™ì™„ì„± ê²€ìƒ‰ ì»´í¬ë„ŒíŠ¸ - ì‹¤ì œ ì„œë¸Œíƒœê·¸ ê¸°ë°˜ ì¶”ì²œ</p>
          
          <div class="component-demo">
            <div class="demo-search">
              <SearchInput 
                v-model="searchQuery"
                placeholder="ë¬¸êµ¬ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”... (ì˜ˆ: êµí†µì•ˆì „, ë…ì„œí™œë™)"
                :suggestions="searchSuggestions"
                @search="handleSearch"
              />
            </div>
            <p v-if="searchQuery" class="search-result">
              ğŸ” ê²€ìƒ‰ì–´: "<strong>{{ searchQuery }}</strong>"
            </p>
            <div v-if="searchQuery" class="suggested-categories">
              <span v-for="category in getRelatedCategories(searchQuery)" :key="category" class="category-hint">
                {{ category }}
              </span>
            </div>
          </div>
        </section>

        <!-- NoticeCard ì»´í¬ë„ŒíŠ¸ -->
        <section class="component-section">
          <h2>NoticeCard</h2>
          <p>ì•Œë¦¼ì¥ ë¬¸êµ¬ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ - ë©”ì¸ ì¹´í…Œê³ ë¦¬ + ì„œë¸Œíƒœê·¸ ì‹œìŠ¤í…œ</p>
          
          <div class="component-demo">
            <div class="demo-notice-cards">
              <NoticeCard
                title="ê²¨ìš¸ì²  ë“±í•˜êµ ì•ˆì „ ìˆ˜ì¹™"
                content="ëˆˆê³¼ ì–¼ìŒìœ¼ë¡œ ë¯¸ë„ëŸ¬ìš´ ê²¨ìš¸ì² , ì•ˆì „í•œ ë“±í•˜êµë¥¼ ìœ„í•´ ë‹¤ìŒ ì‚¬í•­ì„ ê¼­ ì§€ì¼œì£¼ì„¸ìš”."
                :tags="['ì•ˆì „ë³´ê±´']"
                :sub-tags="['êµí†µì•ˆì „', 'ê²¨ìš¸ì²´ìœ¡', 'í•œíŒŒëŒ€ë¹„']"
                author="ê¹€ì•ˆì „ ì„ ìƒë‹˜"
                :like-count="23"
                :sub-items="['ë¯¸ë„ëŸ¼ ë°©ì§€ ì‹ ë°œì„ ì°©ìš©í•˜ì„¸ìš”', 'ê¸‰í•˜ê²Œ ë›°ì§€ ë§ˆì‹œê³  ì²œì²œíˆ ê±¸ì–´ì£¼ì„¸ìš”', 'ë¹™íŒê¸¸ì—ì„œëŠ” íŠ¹íˆ ì¡°ì‹¬í•˜ì„¸ìš”']"
                :created-at="new Date(Date.now() - 3 * 60 * 60 * 1000)"
                :is-recommended="true"
                @copy="handleCopy"
                @save="handleSave"
              />
              
              <NoticeCard
                title="ì°½ì˜ì  ë…ì„œ í™œë™ ì•ˆë‚´"
                content="ì´ë²ˆ ì£¼ëŠ” ì°½ì˜ ë…ì„œ ì£¼ê°„ì…ë‹ˆë‹¤. ì±…ì„ ì½ê³  ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ í‘œí˜„í•´ë³´ì„¸ìš”."
                :tags="['í•™ìŠµê´€ë¦¬', 'ì°½ì˜ì˜ˆìˆ ']"
                :sub-tags="['ë…ì„œí™œë™', 'ì°½ì‘í™œë™', 'í‘œí˜„ë ¥']"
                author="ì´ì°½ì˜ ì„ ìƒë‹˜"
                :like-count="18"
                :sub-items="['ì¢‹ì•„í•˜ëŠ” ì¥ë©´ì„ ê·¸ë¦¼ìœ¼ë¡œ ê·¸ë ¤ë³´ì„¸ìš”', 'ì£¼ì¸ê³µì—ê²Œ í¸ì§€ë¥¼ ì¨ë³´ì„¸ìš”', 'ë‹¤ë¥¸ ê²°ë§ì„ ìƒìƒí•´ë³´ì„¸ìš”']"
                :created-at="new Date(Date.now() - 1 * 24 * 60 * 60 * 1000)"
                :is-popular="true"
                @copy="handleCopy"
                @save="handleSave"
              />
              
              <NoticeCard
                title="ê±´ê°•í•œ ê²¨ìš¸ë‚˜ê¸° í”„ë¡œì íŠ¸"
                content="ì¶”ìš´ ê²¨ìš¸, ê±´ê°•í•˜ê²Œ ì§€ë‚´ê¸° ìœ„í•œ ìƒí™œ ìŠµê´€ì„ í•¨ê»˜ ì‹¤ì²œí•´ë´…ì‹œë‹¤."
                :tags="['ì²´ìœ¡ê±´ê°•', 'ì¸ì„±êµìœ¡']"
                :sub-tags="['ê±´ê°•ê´€ë¦¬', 'ì²´ë ¥í–¥ìƒ', 'í˜‘ë ¥ì •ì‹ ']"
                author="ë°•ê±´ê°• ì„ ìƒë‹˜"
                :like-count="31"
                :sub-items="['ë§¤ì¼ 30ë¶„ ì´ìƒ ì‹¤ë‚´ ìš´ë™í•˜ê¸°', 'ì¶©ë¶„í•œ ìˆ˜ë©´ê³¼ ì˜ì–‘ ì„­ì·¨', 'ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ê±´ê°• ëª©í‘œ ì„¸ìš°ê¸°']"
                :created-at="new Date(Date.now() - 2 * 24 * 60 * 60 * 1000)"
                :clickable="true"
                :is-selecting-mode="selectingMode"
                :is-selected="selectedNotices.includes('health-winter')"
                @click="() => toggleNoticeSelection('health-winter')"
                @copy="handleCopy"
                @save="handleSave"
              />
            </div>
            
            <div class="demo-controls">
              <BaseButton 
                variant="outline" 
                @click="selectingMode = !selectingMode"
              >
                {{ selectingMode ? 'ì„ íƒ ëª¨ë“œ í•´ì œ' : 'ì„ íƒ ëª¨ë“œ í™œì„±í™”' }}
              </BaseButton>
              <span v-if="selectingMode" class="selection-info">
                ì„ íƒëœ ë¬¸êµ¬: {{ selectedNotices.length }}ê°œ
              </span>
            </div>
          </div>
        </section>

        <!-- ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë“¤ -->
        <section class="component-section">
          <h2>SelectedNoticePanel</h2>
          <p>ì„ íƒëœ ë¬¸êµ¬ë“¤ì„ ê´€ë¦¬í•˜ëŠ” íŒ¨ë„ ì»´í¬ë„ŒíŠ¸</p>
          
          <div class="component-demo">
            <SelectedNoticePanel
              v-if="demoNotices.length > 0"
              :notices="demoNotices"
              :show="showDemoPanel"
              @close="showDemoPanel = false"
              @clear="handleClearDemo"
              @copy-all="handleCopyAll"
              @use-in-editor="handleUseInEditor"
              @preview="handlePreview"
              @remove="handleRemoveDemo"
              @reorder="handleReorderDemo"
            />
            <div class="demo-controls">
              <BaseButton 
                variant="primary" 
                @click="showDemoPanel = true"
              >
                ë°ëª¨ íŒ¨ë„ ì—´ê¸°
              </BaseButton>
              <BaseButton 
                variant="outline" 
                @click="addDemoNotice"
              >
                ë°ëª¨ ë¬¸êµ¬ ì¶”ê°€
              </BaseButton>
            </div>
            <p v-if="!showDemoPanel" class="demo-placeholder">
              ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ SelectedNoticePanel ë°ëª¨ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.
            </p>
          </div>
        </section>

        <section class="component-section">
          <h2>AppLayout</h2>
          <p>ì „ì²´ ì•±ì˜ ë ˆì´ì•„ì›ƒì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ - í˜„ì¬ ì´ í˜ì´ì§€ë¥¼ ê°ì‹¸ê³  ìˆìŒ</p>
          
          <div class="component-demo">
            <div class="layout-demo">
              <div class="layout-structure">
                <div class="layout-header">Header (ë„¤ë¹„ê²Œì´ì…˜)</div>
                <div class="layout-main">
                  <div class="layout-sidebar">Sidebar (ë©”ë‰´)</div>
                  <div class="layout-content">Main Content (ì´ ì˜ì—­)</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ì„œë¸Œíƒœê·¸ ì‹œìŠ¤í…œ ì†Œê°œ -->
        <section class="component-section">
          <h2>ì„œë¸Œíƒœê·¸ ì‹œìŠ¤í…œ</h2>
          <p>ì¹´í…Œê³ ë¦¬ë³„ ì„¸ë¶€ ë¶„ë¥˜ë¥¼ ìœ„í•œ {{ allSubTags.length }}ê°œì˜ ì„œë¸Œíƒœê·¸ ì²´ê³„</p>
          
          <div class="component-demo">
            <div v-for="category in sampleCategories" :key="category" class="category-subtags">
              <h4 class="category-title">
                <CategoryTag :category="category" />
                {{ categoryMetaMap[category].displayName }}
              </h4>
              <div class="subtag-list">
                <span 
                  v-for="subTag in getSubTagsByCategory(category).slice(0, 8)" 
                  :key="subTag"
                  class="subtag-item"
                  :style="getSubTagStyle(subTag)"
                >
                  #{{ subTag }}
                </span>
                <span v-if="getSubTagsByCategory(category).length > 8" class="subtag-more">
                  +{{ getSubTagsByCategory(category).length - 8 }}ê°œ ë”
                </span>
              </div>
            </div>
          </div>
        </section>
      </main>

      <!-- í‘¸í„° -->
      <footer class="library-footer">
        <div class="footer-content">
          <p>ğŸ¨ ì‹¤ì‹œê°„ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ - ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” ì‹¤ì œ ì•±ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë²„ì „ì…ë‹ˆë‹¤</p>
          <div class="footer-links">
            <router-link to="/main" class="footer-link">ë©”ì¸ìœ¼ë¡œ</router-link>
            <router-link to="/about" class="footer-link">About</router-link>
          </div>
        </div>
      </footer>
    </div>
  </AppLayout>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import AppLayout from '../components/AppLayout.vue'
import BaseCard from '../components/common/BaseCard.vue'
import BaseButton from '../components/common/BaseButton.vue'
import CategoryTag from '../components/common/CategoryTag.vue'
import SearchInput from '../components/common/SearchInput.vue'
import NoticeCard from '../components/common/NoticeCard.vue'
import SelectedNoticePanel from '../components/common/SelectedNoticePanel.vue'
import { 
  categories, 
  allSubTags, 
  categoryMetaMap, 
  getSubTagsByCategory,
  getMainCategoryFromSubTag,
  getCategoryMeta,
  inferCategoryFromKeywords,
  type Category 
} from '../constants/categories'
import type { Notice } from '../data/notices'

// ë°˜ì‘í˜• ìƒíƒœ
const loading = ref(false)
const activeTag = ref<string>('')
const searchQuery = ref('')
const selectingMode = ref(false)
const selectedNotices = ref<string[]>([])
const showDemoPanel = ref(false)

// ë°ëª¨ìš© ë¬¸êµ¬ ë°ì´í„°
const demoNotices = ref<Notice[]>([
  {
    id: '1',
    title: 'ê²¨ìš¸ì²  ì•ˆì „ ìˆ˜ì¹™',
    content: 'ì¶”ìš´ ê²¨ìš¸, ì•ˆì „í•˜ê²Œ ì§€ë‚´ê¸° ìœ„í•œ ì¤‘ìš”í•œ ìˆ˜ì¹™ë“¤ì„ ì•Œì•„ë´…ì‹œë‹¤.',
    tags: ['ì•ˆì „ë³´ê±´'],
    subTags: ['êµí†µì•ˆì „', 'í•œíŒŒëŒ€ë¹„'],
    subItems: ['ë¯¸ë„ëŸ¼ë°©ì§€ ì‹ ë°œ ì°©ìš©', 'ì¶©ë¶„í•œ ë³´ì˜¨'],
    author: 'ê¹€ì•ˆì „',
    createdAt: new Date(),
    likeCount: 12
  },
  {
    id: '2', 
    title: 'ë…ì„œ í™œë™ ì•ˆë‚´',
    content: 'ì°½ì˜ì ì¸ ë…ì„œ í™œë™ìœ¼ë¡œ ìƒìƒë ¥ì„ í‚¤ì›Œë´…ì‹œë‹¤.',
    tags: ['í•™ìŠµê´€ë¦¬'],
    subTags: ['ë…ì„œí™œë™', 'ì°½ì‘í™œë™'],
    subItems: ['ë§¤ì¼ 30ë¶„ ë…ì„œ', 'ë…í›„ê° ì‘ì„±'],
    author: 'ì´ë…ì„œ',
    createdAt: new Date(),
    likeCount: 8
  }
])

// ì»´í¬ë„ŒíŠ¸ ë§µ (í†µê³„ìš©)
const components = {
  'BaseCard': BaseCard,
  'BaseButton': BaseButton,
  'CategoryTag': CategoryTag,
  'SearchInput': SearchInput,
  'NoticeCard': NoticeCard,
  'SelectedNoticePanel': SelectedNoticePanel,
  'AppLayout': AppLayout
}

// ìƒ˜í”Œ ì¹´í…Œê³ ë¦¬ë“¤ (ì„œë¸Œíƒœê·¸ ì‹œì—°ìš©)
const sampleCategories: Category[] = ['í•™ìŠµê´€ë¦¬', 'ì•ˆì „ë³´ê±´', 'ì¸ì„±êµìœ¡', 'ì°½ì˜ì˜ˆìˆ ']

// ê²€ìƒ‰ ìë™ì™„ì„± ë°ì´í„° (ì‹¤ì œ ì„œë¸Œíƒœê·¸ ê¸°ë°˜)
const searchSuggestions = computed(() => {
  return [
    // í•™ìŠµê´€ë¦¬ ê´€ë ¨
    'ì‹œí—˜ì•ˆë‚´', 'ê³¼ì œì œì¶œ', 'ë…ì„œí™œë™', 'ë°›ì•„ì“°ê¸°', 'í•™ìš©í’ˆ',
    // ì•ˆì „ë³´ê±´ ê´€ë ¨  
    'êµí†µì•ˆì „', 'ì²´ìœ¡ì•ˆì „', 'ê°ê¸°ì˜ˆë°©', 'í­ì—¼ëŒ€ë¹„', 'í•œíŒŒëŒ€ë¹„',
    // ì¸ì„±êµìœ¡ ê´€ë ¨
    'í•™êµí­ë ¥ì˜ˆë°©', 'ë°°ë ¤', 'í˜‘ë ¥ì •ì‹ ', 'ì¹œì ˆí•¨', 'ê·œì¹™ìœ„ë°˜',
    // ì°½ì˜ì˜ˆìˆ  ê´€ë ¨
    'ë¯¸ìˆ ì „ì‹œ', 'ì°½ì‘í™œë™', 'ìŒì•…íšŒ', 'ì˜ˆìˆ ì²´í—˜', 'ìƒìƒë ¥',
    // ê¸°íƒ€
    'í™˜ê²½ë³´í˜¸', 'ë¶„ë¦¬ìˆ˜ê±°', 'í•™êµí–‰ì‚¬', 'ì²´í—˜í•™ìŠµ', 'ê°œë³„ìƒë‹´'
  ]
})

// ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë“¤
const toggleLoading = () => {
  loading.value = true
  setTimeout(() => {
    loading.value = false
  }, 2000)
}

const handleCardClick = () => {
  alert('ì¹´ë“œê°€ í´ë¦­ë˜ì—ˆìŠµë‹ˆë‹¤!')
}

const setActiveTag = (category: string) => {
  activeTag.value = activeTag.value === category ? '' : category
}

const handleSearch = (query: string) => {
  console.log('ê²€ìƒ‰:', query)
  searchQuery.value = query
}

const handleCopy = () => {
  alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!')
}

const handleSave = () => {
  alert('ë¬¸êµ¬ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!')
}

const toggleNoticeSelection = (noticeId: string) => {
  if (selectedNotices.value.includes(noticeId)) {
    selectedNotices.value = selectedNotices.value.filter(id => id !== noticeId)
  } else {
    selectedNotices.value.push(noticeId)
  }
}

const handlePreview = () => {
  alert('ë¯¸ë¦¬ë³´ê¸° ëª¨ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤!')
}

const handleClearSelection = () => {
  selectedNotices.value = []
  selectingMode.value = false
}

const handleExport = () => {
  alert('ì„ íƒëœ ë¬¸êµ¬ë“¤ì„ ë‚´ë³´ëƒ…ë‹ˆë‹¤!')
}

// SelectedNoticePanel ë°ëª¨ í•¸ë“¤ëŸ¬ë“¤
const handleClearDemo = () => {
  demoNotices.value = []
  showDemoPanel.value = false
}

const handleCopyAll = () => {
  alert('ëª¨ë“  ë¬¸êµ¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!')
}

const handleUseInEditor = () => {
  alert('í¸ì§‘ê¸°ë¡œ ì´ë™í•©ë‹ˆë‹¤!')
}

const handleRemoveDemo = (noticeId: string) => {
  demoNotices.value = demoNotices.value.filter(notice => notice.id !== noticeId)
}

const handleReorderDemo = (fromIndex: number, toIndex: number) => {
  const notices = [...demoNotices.value]
  const [moved] = notices.splice(fromIndex, 1)
  notices.splice(toIndex, 0, moved)
  demoNotices.value = notices
}

const addDemoNotice = () => {
  const newNotice: Notice = {
    id: Date.now().toString(),
    title: 'ìƒˆë¡œìš´ ë°ëª¨ ë¬¸êµ¬',
    content: 'ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ í…ŒìŠ¤íŠ¸ìš© ë¬¸êµ¬ì…ë‹ˆë‹¤.',
    tags: ['ê¸°íƒ€ì‚¬í•­'],
    subTags: ['ê¸°íƒ€ì‚¬í•­'],
    subItems: ['ë°ëª¨ í•­ëª© 1', 'ë°ëª¨ í•­ëª© 2'],
    author: 'í…ŒìŠ¤íŠ¸',
    createdAt: new Date(),
    likeCount: 0
  }
  demoNotices.value.push(newNotice)
}

// ê²€ìƒ‰ì–´ì™€ ê´€ë ¨ëœ ì¹´í…Œê³ ë¦¬ ì°¾ê¸°
const getRelatedCategories = (query: string): Category[] => {
  if (!query.trim()) return []
  return inferCategoryFromKeywords(query).slice(0, 3) // ìµœëŒ€ 3ê°œë§Œ í‘œì‹œ
}

// ì„œë¸Œíƒœê·¸ ìŠ¤íƒ€ì¼ ê³„ì‚°
const getSubTagStyle = (subTag: string) => {
  const mainCategory = getMainCategoryFromSubTag(subTag)
  if (mainCategory) {
    const meta = getCategoryMeta(mainCategory)
    return {
      color: meta.color,
      backgroundColor: 'transparent'
    }
  }
  return {
    color: '#6b7280',
    backgroundColor: 'transparent'
  }
}
</script>

<style scoped>
.component-library {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  min-height: 100vh;
}

.library-header {
  text-align: center;
  margin-bottom: 3rem;
  padding: 3rem 2rem;
  background: white;
  border-radius: 1rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  border: 1px solid #e5e7eb;
}

.library-header h1 {
  font-size: 3rem;
  font-weight: 800;
  color: #1f2937;
  margin-bottom: 1rem;
  background: linear-gradient(45deg, #3b82f6, #8b5cf6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.library-header p {
  font-size: 1.25rem;
  color: #6b7280;
  margin-bottom: 2rem;
}

.library-stats {
  display: flex;
  justify-content: center;
  gap: 2rem;
  flex-wrap: wrap;
}

.stat-item {
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #f0f7ff 0%, #e1f0ff 100%);
  border: 1px solid #bfdbfe;
  border-radius: 2rem;
  color: #2563eb;
  font-weight: 600;
  font-size: 0.875rem;
}

.library-content {
  display: flex;
  flex-direction: column;
  gap: 3rem;
}

.component-section {
  background: white;
  padding: 2.5rem;
  border-radius: 1rem;
  border: 1px solid #e5e7eb;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.component-section h2 {
  font-size: 2rem;
  font-weight: 700;
  color: #1f2937;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.component-section h2::before {
  content: 'ğŸ§©';
  font-size: 1.5rem;
}

.component-section p {
  color: #6b7280;
  margin-bottom: 2rem;
  font-size: 1rem;
  line-height: 1.6;
}

.component-demo {
  background: #f9fafb;
  padding: 2rem;
  border-radius: 0.75rem;
  border: 1px solid #e5e7eb;
}

.demo-subtitle {
  font-size: 1rem;
  font-weight: 600;
  color: #374151;
  margin: 1.5rem 0 0.75rem 0;
  padding: 0.5rem 0;
  border-bottom: 1px solid #e5e7eb;
}

.demo-subtitle:first-of-type {
  margin-top: 0;
}

.demo-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
}

.demo-buttons {
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.demo-buttons:last-child {
  margin-bottom: 0;
}

.demo-tags {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.demo-tags:last-child {
  margin-bottom: 0;
}

.demo-search {
  max-width: 500px;
  margin-bottom: 1.5rem;
}

.search-result {
  color: #374151;
  font-weight: 600;
  padding: 1rem;
  background: white;
  border-radius: 0.5rem;
  border: 1px solid #d1d5db;
  margin-bottom: 1rem;
}

.suggested-categories {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.category-hint {
  padding: 0.375rem 0.75rem;
  background: #eff6ff;
  color: #2563eb;
  border-radius: 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  border: 1px solid #bfdbfe;
}

.demo-notice-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 2rem;
  margin-bottom: 2rem;
}

.demo-controls {
  display: flex;
  gap: 1rem;
  align-items: center;
  justify-content: center;
  padding: 1.5rem;
  background: white;
  border-radius: 0.75rem;
  border: 1px solid #e5e7eb;
  flex-wrap: wrap;
}

.selection-info {
  color: #3b82f6;
  font-weight: 600;
  font-size: 0.875rem;
}

.demo-placeholder {
  text-align: center;
  color: #6b7280;
  font-style: italic;
  padding: 2rem;
  background: white;
  border-radius: 0.5rem;
  border: 2px dashed #d1d5db;
}

.layout-demo {
  background: white;
  border-radius: 0.5rem;
  overflow: hidden;
  border: 1px solid #e5e7eb;
}

.layout-structure {
  min-height: 200px;
}

.layout-header {
  background: #3b82f6;
  color: white;
  padding: 1rem;
  text-align: center;
  font-weight: 600;
}

.layout-main {
  display: flex;
  min-height: 160px;
}

.layout-sidebar {
  background: #f3f4f6;
  color: #374151;
  padding: 1rem;
  width: 150px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 500;
  border-right: 1px solid #e5e7eb;
}

.layout-content {
  background: #fafafa;
  color: #6b7280;
  padding: 1rem;
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 500;
}

.category-subtags {
  margin-bottom: 2rem;
  padding: 1.5rem;
  background: white;
  border-radius: 0.75rem;
  border: 1px solid #e5e7eb;
}

.category-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
  font-size: 1.125rem;
  font-weight: 600;
  color: #374151;
}

.subtag-list {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  align-items: center;
}

.subtag-item {
  padding: 0.375rem 0.75rem;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  border: 1px solid currentColor;
  opacity: 0.8;
  transition: all 0.2s ease;
}

.subtag-item:hover {
  opacity: 1;
  transform: translateY(-1px);
}

.subtag-more {
  color: #6b7280;
  font-size: 0.875rem;
  font-style: italic;
  padding: 0.375rem 0.75rem;
}

.library-footer {
  margin-top: 4rem;
  padding: 2rem;
  background: white;
  border-radius: 1rem;
  border: 1px solid #e5e7eb;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.footer-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 1rem;
}

.footer-content p {
  color: #6b7280;
  margin: 0;
  flex: 1;
}

.footer-links {
  display: flex;
  gap: 1rem;
}

.footer-link {
  color: #3b82f6;
  text-decoration: none;
  font-weight: 500;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  transition: all 0.2s ease;
}

.footer-link:hover {
  background: #eff6ff;
  color: #2563eb;
}

@media (max-width: 768px) {
  .component-library {
    padding: 1rem;
  }
  
  .library-header {
    padding: 2rem 1rem;
    margin-bottom: 2rem;
  }
  
  .library-header h1 {
    font-size: 2rem;
  }

  .library-stats {
    gap: 1rem;
  }
  
  .component-section {
    padding: 1.5rem;
  }
  
  .demo-buttons,
  .demo-controls {
    justify-content: center;
  }
  
  .demo-notice-cards {
    grid-template-columns: 1fr;
  }

  .layout-main {
    flex-direction: column;
  }

  .layout-sidebar {
    width: 100%;
  }

  .footer-content {
    flex-direction: column;
    text-align: center;
  }
}
</style>
